<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>初识Vue</title>
    <!-- 引入Vue -->
    <script type="text/javascript" src="../vue_basic/js/vue.min.js"></script>
  </head>
  <body>
    <!-- 准备好一个容器 -->
    <div id="demo">
      <h1>Hello，{{name.toUpperCase()}}，{{address}}</h1>
      <h1>我的心情是{{mood}}</h1>
      <button @click="changemood">点我哦</button>
    </div>

    <script type="text/javascript">
          Vue.config.productionTip = false; //阻止 vue 在启动时生成生产提示。

          function asyncFunc(callback) {
            setTimeout(function () {
              callback("result", "success");
            }, 1000);
          }

          asyncFunc(function (result, status) {
            if (status == "success") {
              console.log(result);
            }

            ///////////////
            var fs = require("fs");

            function f(x) {
              console.log(x);
            }

            function writeFile(callback) {
              //关键字callback，表示这个参数不是一个普通变量，而是一个函数
              fs.writeFile(
                "input.txt",
                "我是通过fs.writeFile 写入文件的内容",
                function (err) {
                  if (!err) {
                    console.log("文件写入完毕!");
                    c = 1;
                    callback(c); // 因为我们传进来的函数名是f()，所以此行相当于调用一次f(c)
                  }
                }
              );
            }
            var c = 0;
            writeFile(f); // 函数f作为一个实参传进writeFile函数
          });


      const promise = new Promise(function(resolve, reject) {
        // ... some code
        if (/* 异步操作成功 */){
          resolve(value);
        } else {
          reject(error);
        }
        });
    </script>

    <script>
            1. 异步加载图片

      function loadImage(imageUrl) {
        return new Promise(function(resolve, reject) {
          var image = new Image();
          image.onload = function() {
            resolve(image);
          };
          image.onerror = function() {
            reject(new Error('Could not load image at ' + imageUrl));
          };
          image.src = imageUrl;
        });
      }

      loadImage('https://example.com/image.jpg').then(function(image) {
        console.log('Image loaded successfully!');
      }).catch(function(error) {
        console.error('Error loading image:', error);
      });
      ```

      2. AJAX请求
      ```
      function request(url, method) {
        return new Promise(function(resolve, reject) {
          var xhr = new XMLHttpRequest();
          xhr.open(method, url);
          xhr.onload = function() {
            if (xhr.status >= 200 && xhr.status < 300) {
              resolve(xhr.response);
            } else {
              reject(new Error(xhr.statusText));
            }
          };
          xhr.onerror = function() {
            reject(new Error('Network error'));
          };
          xhr.send();
        });
      }

      request('/api/data', 'GET').then(function(response) {
        console.log('Data received:', response);
      }).catch(function(error) {
        console.error('Error fetching data:', error);
      });
      ```

      3. 延迟执行
      ```
      function delay(ms) {
        return new Promise(function(resolve) {
          setTimeout(resolve, ms);
        });
      }

      delay(1000).then(function() {
        console.log('Executed after 1 second');
      });
      ```
    </script>
  </body>
</html>
